
<!DOCTYPE html>
<html>
<head>
	<title>Fantasy Stats</title>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
	<script src="https://cdn.datatables.net/1.10.7/js/jquery.dataTables.min.js"></script>
	<script src="https://cdn.datatables.net/plug-ins/1.10.7/integration/bootstrap/3/dataTables.bootstrap.js"></script>
	<link href="https://cdn.datatables.net/plug-ins/1.10.7/integration/bootstrap/3/dataTables.bootstrap.css" rel="stylesheet" />
	<script type="text/javascript">
		getStats("QB");
		getStats("WR");
		getStats("RB");
		getStats("TE");
		getStats("K");
		getStats("DEF");

		function getStats(position) {
			$.get( "tmp/"+position+".json", function( data ) {
				obj = JSON.parse(data);
				var table = "<h3>"+position+"</h3>";
					table += "<p>Last Updated: "+obj['created_at']+"</p><div class='table-responsive'><table id='"+position.toLowerCase()+"-table' class='table table-striped'>";
					table += "<thead><tr><th>Name</th>";
					table += "<th>Team</th>";
					table += "<th>Opponets</th>";
					table += "<th>Game Time</th>";
					table += "<th>Injury</th>";
					table += "<th>Practice Status</th>";
					table += "<th>Game Status</th>";
					table += "<th>Average</th>";
					table += "<th>Projected Points NFL</th>";
					table += "<th>Projected Points FFN</th>";
					table += "<th>Projected Points FFN Low</th>";
					table += "<th>Projected Points FFN High</th>";
					table += "<th>Weighted Points FFN</th>";
					table += "</tr></thead><tbody>";
				$.each(obj[position], function (key, val) {
					projectedPointsNFL = val['projectedPointsNFL'] ? val['projectedPointsNFL'] : 0;
					projectedPointsFFNStandard = val['projectedPointsFFNStandard'] ? val['projectedPointsFFNStandard'] : 0;
					projectedPointsFFNStandardLow = val['projectedPointsFFNStandardLow'] ? val['projectedPointsFFNStandardLow'] : 0;
					projectedPointsFFNStandardHigh = val['projectedPointsFFNStandardHigh'] ? val['projectedPointsFFNStandardHigh'] : 0;
					weightedPointsFFNStandard = val['weightedPointsFFNStandard'] ? val['weightedPointsFFNStandard'] : 0;
					if (parseFloat(projectedPointsNFL) == 0 || parseFloat(weightedPointsFFNStandard) == 0) {
						if (parseFloat(projectedPointsNFL) == 0) {
							average = weightedPointsFFNStandard
						} else if (parseFloat(weightedPointsFFNStandard) == 0) {
							average = projectedPointsNFL
							
						}
					} else {
						average = ((parseFloat(projectedPointsNFL) + parseFloat(weightedPointsFFNStandard)) / 2).toFixed(2);
					}
					injury = val['injury'] ? val['injury'] : '';
					practiceStatus = val['practiceStatus'] ? val['practiceStatus'] : '';
					gameStatus = val['gameStatus'] ? val['gameStatus'] : '';

					table += "<tr><td>"+key+"</td>";
					table += "<td>"+val['team']+"</td>";
					table += "<td>"+val['vs']+"</td>";
					table += "<td>"+val['gameTime']+"</td>";
					table += "<td>"+injury+"</td>";
					table += "<td>"+practiceStatus+"</td>";
					table += "<td>"+gameStatus+"</td>";
					table += "<td>"+average +"</td>";
					table += "<td>"+projectedPointsNFL +"</td>";
					table += "<td>"+projectedPointsFFNStandard +"</td>";
					table += "<td>"+projectedPointsFFNStandardLow +"</td>";
					table += "<td>"+projectedPointsFFNStandardHigh +"</td>";
					table += "<td>"+weightedPointsFFNStandard +"</td>";
					table += "</tr>";
				});
				table += "</tbody></table></div>";
				$( "#"+position.toLowerCase()+"" ).html(table);
				$(document).ready(function() {
					$('#'+position.toLowerCase()+'-table').dataTable();
				});
			});
		}
	</script>
</head>
<body>
<nav class="navbar navbar-default">
	<div class="container-fluid">
		<div class="navbar-header">
			<a class="navbar-brand" href="/	">Fantasy Stats</a>
		</div>
	</div>
</nav>

<div class="jumbotron">
	<div class="container">
		<h1>Fantasy Stats</h1>
		<p>Fantasy Stats from a few different sites:</p>
		<ul>
			<li><a href="http://www.fantasyfootballnerd.com">Fantasy Football Nerd</a></li>
			<li><a href="http://api.fantasy.nfl.com">NFL</a></li>
			<li><a href="https://fantasydata.com">Fantasy Data</a></li>
		</ul>
	</div>
</div>

<div class="container">
	<ul class="nav nav-tabs">
		<li class="active"><a data-toggle="tab" href="#qb">QB</a></li>
		<li><a data-toggle="tab" href="#wr">WR</a></li>
		<li><a data-toggle="tab" href="#rb">RB</a></li>
		<li><a data-toggle="tab" href="#te">TE</a></li>
		<li><a data-toggle="tab" href="#k">K</a></li>
		<li><a data-toggle="tab" href="#def">DEF</a></li>
	</ul>
	<div class="tab-content">
		<div id="qb" class="tab-pane fade in active">
			<h3>QB</h3>
		</div>
		<div id="wr" class="tab-pane fade">
			<h3>WR</h3>
		</div>
		<div id="rb" class="tab-pane fade">
			<h3>RB</h3>
		</div>
		<div id="te" class="tab-pane fade">
			<h3>TE</h3>
		</div>
		<div id="k" class="tab-pane fade">
			<h3>K</h3>
		</div>
		<div id="def" class="tab-pane fade">
			<h3>DEF</h3>
		</div>
	</div>
</div>
</body>
</html>
